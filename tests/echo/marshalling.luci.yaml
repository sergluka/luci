types:
  - use: echo::proto::V
    as:  V
  - use: echo::proto::R
    as:  R

actors:
  - actor
dummies:
  - dummy

events:
  - id: bind
    bind:
      dst: $PAYLOAD
      src:
        literal:
          one: vienas
          two: du
          three: trys
  
  - id: send
    happens_after:
      - bind
    send:
      from: dummy
      type: V
      data:
        bind: $PAYLOAD
  
  - id: recv
    require: reached
    happens_after:
      - send
    recv:
      to: dummy
      type: V
      data: $PAYLOAD
      also:
        - one: $ONE
          two: $TWO
          three: $THREE
  
  - id: check-one
    require: reached
    happens_after:
      - recv
    bind:
      dst:
        - $ONE
        - du
        - $THREE
      src:
        bind:
          - vienas
          - $TWO
          - trys
  
  - id: check-two
    require: reached
    happens_after:
      - recv
    bind:
      dst:
        - vienas
        - $TWO
        - trys
      src:
        bind:
          - $ONE
          - du
          - $THREE